<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Introduction to    </title>
    <meta charset="utf-8" />
    <meta name="author" content="   Jason Thomas    R Working Group" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/htmltools-fill/fill.css" rel="stylesheet" />
    <script src="libs/htmlwidgets/htmlwidgets.js"></script>
    <link href="libs/datatables-css/datatables-crosstalk.css" rel="stylesheet" />
    <script src="libs/datatables-binding/datatables.js"></script>
    <script src="libs/jquery/jquery-3.6.0.min.js"></script>
    <link href="libs/dt-core/css/jquery.dataTables.min.css" rel="stylesheet" />
    <link href="libs/dt-core/css/jquery.dataTables.extra.css" rel="stylesheet" />
    <script src="libs/dt-core/js/jquery.dataTables.min.js"></script>
    <link href="libs/dt-ext-scroller/css/scroller.dataTables.min.css" rel="stylesheet" />
    <script src="libs/dt-ext-scroller/js/dataTables.scroller.min.js"></script>
    <link href="libs/crosstalk/css/crosstalk.min.css" rel="stylesheet" />
    <script src="libs/crosstalk/js/crosstalk.min.js"></script>
    <link rel="stylesheet" href="style_rgroup.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# Introduction to <br><br> <img src="img/ggplot2-logo.png" width="175" />
]
.author[
### <br><br><br>Jason Thomas <br> <br>R Working Group
]
.date[
### <br>October 23th, 2025
]

---






# Motivation

--

* Plots are dope!  (no motivation necessary)

--

* OK, but why use ggplot2?

--
  
  + peer pressure?  everybody is doing it &lt;br&gt;
--
  (lots of examples on the web &amp; extensions)

--

  + efficiency -- same tool for many different plots

--

  + does a pretty good job


---
# Outline

* Basic logic &amp; concepts

  + aesthetics &amp; saving

* Labels &amp; Axes

* Getting colorful

* Tour of different "types" of plots (`geoms`)

* Grouped data


---
# R packages

Several packages are used for making the plots we'll see today.  You can
install them with...


``` r
install.packages(c("tidyverse", "RColorBrewer", "viridis", "gridExtra"))
# only need to run this one time on your computer
# (may need to install again if you upgrade R to a new version)
```

&lt;p style="font-size:20px; text-align:center"&gt;
("palletteer" is another package for adding different color options) &lt;br&gt;
&lt;/p&gt;

and load them with


``` r
library(tidyverse)  ## this will load ggplot2
library(ggplot2)    ## not needed if loading tidyverse
library(RColorBrewer)
library(viridis)
library(gridExtra)
```


---
class: inverse, center, middle

# Basic Logic &amp; Concepts 


---
background-image: url("img/anatomy.png")
background-color: white

&lt;p style="color:red; font-weight:bold; font-size:32px; position:absolute; top:0"&gt;Anatomy of a Plot&lt;/p&gt;


&lt;p style="font-weight:bold; font-size:20px; position:absolute; bottom:0"&gt;
&lt;a href="https://psu-psychology.github.io/r-bootcamp-2019/talks/ggplot_grammar.html"&gt;
Nate Hall (2019)&lt;/a&gt;&lt;/p&gt;


---
class: slide-font-25
# Anatomy of a plot

The main function for creating a plot is `ggplot()`,  which makes use of...

* **Data**

* **Aesthetics** -- `aes()` creates mappings of variables/values to objects appearing on the plot

* **Layer(s)** consisting of

  + **Geometric** objects -- `geom` determines the type of plot
  (e.g., scatterplot or barchart) and get added as a layer with &lt;br&gt;
  `ggplot(data, aes()) + geom_xxxx()`
  
  + **Statistical** transformation, e.g., line fitted to a cloud of points
  
  + position adjustment for overlapping geoms/objects
  
  + (more data &amp; aesthetic mapping)


---
# Anatomy of a plot (cont.)

* **Scales &amp; coordinate systems** 
 
  + `coord` is usually left out since the Cartesian system handles most cases...
  except maps!
  
  + scaling is largely done under the hood, but emerges when setting colors

* **Faceting** -- using a 3rd "dimension" (plotting subsets of the data)

* **Plot annotations** -- labeling and adjusting the theme


---
# Aesthetics

Each aesthetic can be mapped to a variable (or constant) using `aes()`
or within geoms

* vertical &amp; horizontal position: `aes(x, y)`
* size -- all geoms
* color -- all geoms
* shape -- `geom_point()`
* linetype &amp; linewidth -- `geom_line()`
* fill -- `geom_bar()`
* label -- `geom_text()`


---
# Layering in action


``` r
ggplot(data = mtcars)
```

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="ggplot2_files/figure-html/unnamed-chunk-3-1.png" alt="(just the data)" width="43%" /&gt;
&lt;p class="caption"&gt;(just the data)&lt;/p&gt;
&lt;/div&gt;


---
# Layering in action


``` r
ggplot(data = mtcars,
       mapping = aes(x = mpg, y = wt))
```

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="ggplot2_files/figure-html/unnamed-chunk-4-1.png" alt="(mapping too)" width="43%" /&gt;
&lt;p class="caption"&gt;(mapping too)&lt;/p&gt;
&lt;/div&gt;


---
# Layering in action


``` r
ggplot(data = mtcars,
       mapping = aes(x = mpg, y = wt)) + ## don't forget the '+' !!
  geom_point()
```

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="ggplot2_files/figure-html/unnamed-chunk-5-1.png" alt="(now with geom)" width="43%" /&gt;
&lt;p class="caption"&gt;(now with geom)&lt;/p&gt;
&lt;/div&gt;


---
# Structure of a ggplot


``` r
p &lt;- ggplot(mtcars, aes(x = mpg, y = wt, color=factor(cyl))) + 
  geom_point()
names(p)
```

```
##  [1] "data"        "layers"      "scales"      "guides"      "mapping"    
##  [6] "theme"       "coordinates" "facet"       "plot_env"    "layout"     
## [11] "labels"
```

``` r
summary(p)
```

```
## data: mpg, cyl, disp, hp, drat, wt, qsec, vs, am, gear, carb [32x11]
## mapping:  x = ~mpg, y = ~wt, colour = ~factor(cyl)
## faceting: &lt;ggproto object: Class FacetNull, Facet, gg&gt;
##     compute_layout: function
##     draw_back: function
##     draw_front: function
##     draw_labels: function
##     draw_panels: function
##     finish_data: function
##     init_scales: function
##     map_data: function
##     params: list
##     setup_data: function
##     setup_params: function
##     shrink: TRUE
##     train_scales: function
##     vars: function
##     super:  &lt;ggproto object: Class FacetNull, Facet, gg&gt;
## -----------------------------------
## geom_point: na.rm = FALSE
## stat_identity: na.rm = FALSE
## position_identity
```


---
# Global vs. Local


``` r
ggplot(mtcars, aes(x = mpg, y = wt, color=factor(cyl))) +
  geom_point() + geom_smooth(method="lm")
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-7-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
# Global vs. Local


``` r
ggplot(mtcars, aes(x = mpg, y = wt)) +
  geom_point(aes(color = factor(cyl))) + geom_smooth(method="lm")
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-8-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
# A few more aesthetics


``` r
ggplot(mtcars, aes(x = mpg, y = wt,
                   color = factor(cyl),
*                  shape = factor(cyl))) +
* geom_point(size = 3)
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-9-1.png" width="45%" style="display: block; margin: auto;" /&gt;


---
# A few more aesthetics


``` r
ggplot(mtcars, aes(x = mpg, y = wt,
                   color = factor(cyl),
                   shape = factor(cyl),
*                  size = cyl)) +
  geom_point()
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-10-1.png" width="45%" style="display: block; margin: auto;" /&gt;



---
# A few more aesthetics

* Note that when a mapping is specified inside `aes()`, we get an
extra legend that describes this mapping

  + we could have set the mapping in the geom: &lt;br&gt;
  `geom_point(aes(size = cyl))`
  
* If we set the size outside of `aes()`, then it is not considered
a mapping (so no legend)


We'll return to a similar situation with color in a short bit...


---
class: codefs-50
# A few more aesthetics


``` r
rando &lt;- data.frame(x = runif(10), y = runif(10))
ggplot(rando, aes(x = x, y = y)) + geom_point() + 
  geom_abline(intercept = 0, slope = 1, linetype = 2) # another useful line
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-11-1.png" width="45%" style="display: block; margin: auto;" /&gt;


---
# A few more aesthetics


``` r
ggplot(mtcars, aes(x = mpg, y = wt, color = factor(cyl))) +
  geom_point() + 
  geom_hline(yintercept = mean(mtcars$wt),
*            linewidth = 2)
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-12-1.png" width="45%" style="display: block; margin: auto;" /&gt;



---
# A few more aesthetics

So what is this doing?  How can we improve it?



``` r
ggplot(mtcars, aes(x = mpg, y = wt, color = factor(cyl))) +
  geom_point() + 
  geom_hline(yintercept = mean(mtcars$wt[mtcars$cyl == 4]), linetype = 1) + 
  geom_hline(yintercept = mean(mtcars$wt[mtcars$cyl == 6]), linetype = 2) + 
  geom_hline(yintercept = mean(mtcars$wt[mtcars$cyl == 8]), linetype = 3) 
```


---
# A few more aesthetics

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-14-1.png" style="display: block; margin: auto;" /&gt;


---
# A few more aesthetics

Improvement?


``` r
ggplot(mtcars, aes(x = mpg, y = wt, color = factor(cyl))) +
  geom_point() + 
  geom_hline(aes(yintercept = mean(wt), linetype = factor(cyl)))
```


---
# A few more aesthetics

Biscuits!

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-16-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
# A few more aesthetics

Roll these dice?


``` r
df_mean_wt &lt;- mtcars %&gt;% group_by(cyl) %&gt;% summarize(mean_wt = mean(wt))
ggplot(mtcars, aes(x = mpg, y = wt, color = factor(cyl))) +
  geom_point() + 
  geom_hline(aes(yintercept = mean_wt, linetype = factor(cyl)),
*            data = df_mean_wt)
```


---
# A few more aesthetics

Thanks dplyr!!

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-18-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
# Exercise

Can you improve the previous plot by color coding the horizontal lines?
&lt;br&gt;&lt;br&gt;
(Here is the code to produce the previous plot)


``` r
df_mean_wt &lt;- mtcars %&gt;% group_by(cyl) %&gt;% summarize(mean_wt = mean(wt))
ggplot(mtcars, aes(x = mpg, y = wt, color = factor(cyl))) +
  geom_point() + 
  geom_hline(aes(yintercept = mean_wt, linetype = factor(cyl)),
             data = df_mean_wt)
```





---
class: inverse, center, middle

# Labels &amp; Axes


---
# Labels


``` r
ggplot(mpg, aes(x=cty, y=hwy)) + geom_point() +
  labs(x="does this", y="work?", title="Awesome?",
       subtitle="too much?",
       caption="really")
```


---
# Labels

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-22-1.png" style="display: block; margin: auto;" /&gt;


---
# Axes: ranges


``` r
ggplot(mpg, aes(x=cty, y=hwy)) + geom_point() +
  ylim(0, 50) + xlim(0, 50)
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-23-1.png" width="50%" style="display: block; margin: auto;" /&gt;



---
# Labels: legend


``` r
ggplot(mpg, aes(x=cty, y=hwy)) + 
  geom_point(aes(color = factor(cyl), shape = trans))
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-24-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
# Labels: legend


``` r
ggplot(mpg, aes(x=cty, y=hwy)) + 
  geom_point(aes(color = factor(cyl), shape = trans)) +
* labs(color = "Cylinder", shape = "Transmission")
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-25-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
# Labels: no legend


``` r
ggplot(mtcars, aes(x = factor(cyl), fill = factor(cyl))) +  geom_bar() +
* guides(fill="none")
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-26-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
# Labels: legend position


``` r
ggplot(mtcars, aes(x = factor(cyl), fill = factor(cyl))) +  geom_bar() +
  scale_color_brewer(palette = "Pastel1") + 
  theme(legend.position.inside = c(.50, .80))
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-27-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
class: inverse, center, middle

# Saving your work


---
# Now what?

OK, I've created a masterpiece, now what do I do?

* First, store your art as an object &lt;br&gt;
`p &lt;- ggplot(data, aes) + geom_scatter`

* Next, use `ggsave()` to save the plot as a

  + PDF, jpeg, tiff, png, bmp, svg, wmf (windows only)
   
* You can specify the `width` and `height` as options

  + the default unit is inches, but you can use the
  `units` option with ("cm", "mm", or "px")


---
# Saving ggplots

Example


``` r
p &lt;- ggplot(mtcars, aes(x = mpg, y = wt, color = factor(cyl))) + geom_point()
ggsave("my_plot.pdf", p)
```


---
# Saving ggplots: multiple pages

Often it is useful to make a lot of related plots and arrange them across
multiple pages (e.g., in a PDF doc).

* the `gridExtra` package will help us out

* basic idea is to make a `list()` of plots, then use `marrangeGrob`
to specify the layout

Let's look at at an example


``` r
p1 &lt;- ggplot(mtcars, aes(x = mpg, y = wt, color = factor(cyl))) + geom_point()
p2 &lt;- ggplot(mtcars, aes(x = mpg, y = hp, color = factor(cyl))) + geom_point()
p3 &lt;- ggplot(mtcars, aes(x = mpg, y = disp, color = factor(cyl))) + geom_point()
```


---
# Saving ggplots: multiple pages



``` r
## Saving multiple plots to one file
my_plots &lt;- list()
my_plots[[1]] &lt;- p1
my_plots[[2]] &lt;- p2
my_plots[[3]] &lt;- p3
ggsave(
  filename = "myplots.pdf", 
  plot = marrangeGrob(my_plots,
                      # top=NULL,  # suppress page title
                      nrow=1, ncol=1), 
  width = 15, height = 9
)
```


---
class: inverse, center, middle

# Let's Get Colorful


---
class: slide-font-28
# More on color

* Easy to set colors manually (or using a grey scale)
 
  + The R function `colors()` will print out over 600 options

* There are several different tools for setting colors &amp; ggplot2...

  + need to install packages (e.g. [RColorBrewer](https://cran.r-project.org/package=RColorBrewer),
  [viridis](https://cran.r-project.org/web/packages/viridis/index.html),
  [paletteer](https://cran.r-project.org/web/packages/paletteer/index.html))

  + [useful reference with examples](https://r-graph-gallery.com/ggplot2-color.html)
  
  + Viridis gives color scales that are easier to read by those with colorblindness

* Your options depend on if you are mapping color to a continuous variable (e.g.,
gradients) or categorical variable (e.g. color brewer)


---
# Setting color: manually


``` r
ggplot(mtcars, aes(x = mpg, y = wt, color = factor(cyl))) + geom_point() +
  geom_vline(aes(xintercept = mean(mpg)),
*            color = "red")
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-31-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
# Setting color: notes

* When you want to map a color to a variable, then specify the `color` option
*inside* of `aes()`

* If you to set a color to a constant value then use the `color` option
*outside* of `aes()` and within the `geom`

* When you want to *change* the colors mapped to a variable, then there are
several different tools we can use...

  + (you may need to install the corresponding R package for some of these)


---
# Setting color: manually


``` r
ggplot(mtcars, aes(x = mpg, y = wt, color = factor(cyl))) + 
  geom_point() +
* scale_color_manual(values = c("green", "red", "blue"))
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-32-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
# Setting color: grey scale


``` r
ggplot(mtcars, aes(x = mpg, y = wt, color = factor(cyl))) + geom_point() + 
* scale_color_grey(start = 0.0, end = 0.4)
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-33-1.png" width="50%" style="display: block; margin: auto;" /&gt;



---
class: codefs-50
# Setting color: gradients


``` r
ggplot(mtcars, aes(x = mpg, y = wt, color = cyl)) + # cyl now continuous
  geom_point() + 
* scale_color_gradient(low="red", high="blue")
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-34-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
class: slide-font-20
# Setting color: color brewer

[R Color Brewer Palettes](https://r-graph-gallery.com/38-rcolorbrewers-palettes.html)


``` r
ggplot(mtcars, aes(x = mpg, y = wt, color = factor(cyl))) + geom_point() +
* scale_color_brewer(palette = "BuPu")
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-35-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
class: slide-font-20
# Setting color: Viridis

[Viridis](https://cran.r-project.org/web/packages/viridis/vignettes/intro-to-viridis.html)


``` r
ggplot(mtcars, aes(x = mpg, y = wt, color = factor(cyl))) + geom_point() +
* scale_color_viridis(discrete = TRUE, option = "magma")
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-36-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
class: inverse, center, middle

# Tour of `geoms`

[list of geoms](https://ggplot2.tidyverse.org/reference/#geoms)


---
# Tour of geoms: barchart


``` r
ggplot(mtcars, aes(x = cyl)) + 
* geom_bar()
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-37-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
# Tour of geoms: barchar (ordered)


``` r
ggplot(mtcars, aes(x = fct_infreq(factor(cyl)))) +  # need tidyverse for this
  geom_bar()
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-38-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
# Tour of geoms: barchart (custom)


``` r
mtcars %&gt;% mutate(cyl2 = factor(cyl, levels = c(6, 4, 8))) %&gt;%
  ggplot(aes(x = cyl2)) + geom_bar()
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-39-1.png" width="50%" style="display: block; margin: auto;" /&gt;



---
# Tour of geoms: barchart


``` r
ggplot(mtcars, aes(x = cyl)) + 
* geom_bar(fill = c("blue", "pink4", "green"))
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-40-1.png" width="50%" style="display: block; margin: auto;" /&gt;



---
# Tour of geoms: barchart

``` r
ggplot(mtcars, aes(x = factor(cyl), fill = factor(cyl))) +  geom_bar() +
* scale_color_brewer(palette = "Pastel1")
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-41-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
# Tour of geoms: boxplot

``` r
ggplot(mtcars, aes(x = factor(cyl), y = mpg, color = factor(cyl))) +
  geom_boxplot()
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-42-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
# Tour of geoms: boxplot


``` r
ggplot(mtcars, aes(x = factor(cyl), y = mpg, fill = factor(am))) +
  geom_boxplot()
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-43-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
# Tour of geoms: text

``` r
ggplot(mtcars, aes(x = wt, mpg,
*                  label = rownames(mtcars))) +
* geom_text()
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-44-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
# Tour of geoms: text

``` r
ggplot(mtcars, aes(x = wt, mpg, label = rownames(mtcars))) + geom_point() +
* geom_text(hjust = "right", nudge_x = -0.15)
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-45-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
# Tour of geoms: text

``` r
ggplot(mtcars, aes(x = wt, mpg, label = rownames(mtcars))) + geom_point() +
* geom_text(vjust = 0, nudge_y = 0.5)
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-46-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
# Tour of geoms: different text

``` r
ggplot(mtcars, aes(x = factor(cyl))) +  geom_bar() +
  annotate("text", label = c("4 cyl", "6 cyl", "8 cyl"),
           x = 1:3, y = max(table(mtcars$cyl)) + 2, col = "red")
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-47-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
# Tour of geoms: density


``` r
ggplot(mtcars, aes(mpg)) + geom_density()
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-48-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
# Tour of geoms: density


``` r
ggplot(mtcars, aes(mpg, fill=factor(cyl))) + geom_density()
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-49-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
# Tour of geoms: density


``` r
ggplot(mtcars, aes(mpg, fill=factor(cyl))) +
* geom_density(alpha = 0.5)
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-50-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
# Tour of geoms: histogram


``` r
ggplot(mpg, mapping = aes(x = hwy)) +
  geom_histogram(binwidth = 5)
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-51-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
# Tour of geoms: histogram


``` r
mpg %&gt;% filter(manufacturer == "audi") %&gt;%
  ggplot(aes(x=hwy)) + geom_histogram(binwidth = 1)
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-52-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
# Tour of geoms: histogram


``` r
mpg %&gt;% filter(manufacturer == "audi") %&gt;%
  ggplot(aes(x=log(hwy))) + geom_histogram(binwidth = .01)
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-53-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
# Tour of geoms: histogram


``` r
ggplot(mpg, aes(x=log(hwy))) + geom_histogram(binwidth = .01) +
* facet_wrap(vars(manufacturer, year))
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-54-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
# More with Faceting

* Possible to specify number of rows (and columns) with faceting

* Can combine previous trick with summarized data set



``` r
p &lt;- ggplot(mtcars, aes(mpg, wt)) +
  geom_point() +
* facet_wrap(~ cyl, nrow=2)
df_wt &lt;- mtcars %&gt;% group_by(cyl) %&gt;% summarize(avg_wt = mean(wt)) %&gt;% as.data.frame()
p + geom_hline(aes(yintercept = avg_wt), data=df_wt)
```


---
# More with Faceting

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-56-1.png" style="display: block; margin: auto;" /&gt;


---
class: inverse, center, middle

# Grouped data


---
# Nested data?


``` r
data("ChickWeight")  ## let's look at the data
```

<div class="datatables html-widget html-fill-item" id="htmlwidget-2df38bc6c04656eafd8e" style="width:100%;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-2df38bc6c04656eafd8e">{"x":{"filter":"none","vertical":false,"extensions":["Scroller"],"data":[["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","19","20","21","22","23","24","25","26","27","28","29","30","31","32","33","34","35","36","37","38","39","40","41","42","43","44","45","46","47","48","49","50","51","52","53","54","55","56","57","58","59","60","61","62","63","64","65","66","67","68","69","70","71","72","73","74","75","76","77","78","79","80","81","82","83","84","85","86","87","88","89","90","91","92","93","94","95","96","97","98","99","100","101","102","103","104","105","106","107","108","109","110","111","112","113","114","115","116","117","118","119","120","121","122","123","124","125","126","127","128","129","130","131","132","133","134","135","136","137","138","139","140","141","142","143","144","145","146","147","148","149","150","151","152","153","154","155","156","157","158","159","160","161","162","163","164","165","166","167","168","169","170","171","172","173","174","175","176","177","178","179","180","181","182","183","184","185","186","187","188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232","233","234","235","236","237","238","239","240","241","242","243","244","245","246","247","248","249","250","251","252","253","254","255","256","257","258","259","260","261","262","263","264","265","266","267","268","269","270","271","272","273","274","275","276","277","278","279","280","281","282","283","284","285","286","287","288","289","290","291","292","293","294","295","296","297","298","299","300","301","302","303","304","305","306","307","308","309","310","311","312","313","314","315","316","317","318","319","320","321","322","323","324","325","326","327","328","329","330","331","332","333","334","335","336","337","338","339","340","341","342","343","344","345","346","347","348","349","350","351","352","353","354","355","356","357","358","359","360","361","362","363","364","365","366","367","368","369","370","371","372","373","374","375","376","377","378","379","380","381","382","383","384","385","386","387","388","389","390","391","392","393","394","395","396","397","398","399","400","401","402","403","404","405","406","407","408","409","410","411","412","413","414","415","416","417","418","419","420","421","422","423","424","425","426","427","428","429","430","431","432","433","434","435","436","437","438","439","440","441","442","443","444","445","446","447","448","449","450","451","452","453","454","455","456","457","458","459","460","461","462","463","464","465","466","467","468","469","470","471","472","473","474","475","476","477","478","479","480","481","482","483","484","485","486","487","488","489","490","491","492","493","494","495","496","497","498","499","500","501","502","503","504","505","506","507","508","509","510","511","512","513","514","515","516","517","518","519","520","521","522","523","524","525","526","527","528","529","530","531","532","533","534","535","536","537","538","539","540","541","542","543","544","545","546","547","548","549","550","551","552","553","554","555","556","557","558","559","560","561","562","563","564","565","566","567","568","569","570","571","572","573","574","575","576","577","578"],[42,51,59,64,76,93,106,125,149,171,199,205,40,49,58,72,84,103,122,138,162,187,209,215,43,39,55,67,84,99,115,138,163,187,198,202,42,49,56,67,74,87,102,108,136,154,160,157,41,42,48,60,79,106,141,164,197,199,220,223,41,49,59,74,97,124,141,148,155,160,160,157,41,49,57,71,89,112,146,174,218,250,288,305,42,50,61,71,84,93,110,116,126,134,125,42,51,59,68,85,96,90,92,93,100,100,98,41,44,52,63,74,81,89,96,101,112,120,124,43,51,63,84,112,139,168,177,182,184,181,175,41,49,56,62,72,88,119,135,162,185,195,205,41,48,53,60,65,67,71,70,71,81,91,96,41,49,62,79,101,128,164,192,227,248,259,266,41,49,56,64,68,68,67,68,41,45,49,51,57,51,54,42,51,61,72,83,89,98,103,113,123,133,142,39,35,43,48,55,62,65,71,82,88,106,120,144,157,41,47,54,58,65,73,77,89,98,107,115,117,40,50,62,86,125,163,217,240,275,307,318,331,41,55,64,77,90,95,108,111,131,148,164,167,43,52,61,73,90,103,127,135,145,163,170,175,42,52,58,74,66,68,70,71,72,72,76,74,40,49,62,78,102,124,146,164,197,231,259,265,42,48,57,74,93,114,136,147,169,205,236,251,39,46,58,73,87,100,115,123,144,163,185,192,39,46,58,73,92,114,145,156,184,207,212,233,39,48,59,74,87,106,134,150,187,230,279,309,42,48,59,72,85,98,115,122,143,151,157,150,42,53,62,73,85,102,123,138,170,204,235,256,41,49,65,82,107,129,159,179,221,263,291,305,39,50,63,77,96,111,137,144,151,146,156,147,41,49,63,85,107,134,164,186,235,294,327,341,41,53,64,87,123,158,201,238,287,332,361,373,39,48,61,76,98,116,145,166,198,227,225,220,41,48,56,68,80,83,103,112,135,157,169,178,41,49,61,74,98,109,128,154,192,232,280,290,42,50,61,78,89,109,130,146,170,214,250,272,41,55,66,79,101,120,154,182,215,262,295,321,42,51,66,85,103,124,155,153,175,184,199,204,42,49,63,84,103,126,160,174,204,234,269,281,42,55,69,96,131,157,184,188,197,198,199,200,42,51,65,86,103,118,127,138,145,146,41,50,61,78,98,117,135,141,147,174,197,196,40,52,62,82,101,120,144,156,173,210,231,238,41,53,66,79,100,123,148,157,168,185,210,205,39,50,62,80,104,125,154,170,222,261,303,322,40,53,64,85,108,128,152,166,184,203,233,237,41,54,67,84,105,122,155,175,205,234,264,264],[0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,0,2,4,6,8,10,12,0,2,4,6,8,10,12,14,16,18,20,21,0,2,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21,0,2,4,6,8,10,12,14,16,18,20,21],["1","1","1","1","1","1","1","1","1","1","1","1","2","2","2","2","2","2","2","2","2","2","2","2","3","3","3","3","3","3","3","3","3","3","3","3","4","4","4","4","4","4","4","4","4","4","4","4","5","5","5","5","5","5","5","5","5","5","5","5","6","6","6","6","6","6","6","6","6","6","6","6","7","7","7","7","7","7","7","7","7","7","7","7","8","8","8","8","8","8","8","8","8","8","8","9","9","9","9","9","9","9","9","9","9","9","9","10","10","10","10","10","10","10","10","10","10","10","10","11","11","11","11","11","11","11","11","11","11","11","11","12","12","12","12","12","12","12","12","12","12","12","12","13","13","13","13","13","13","13","13","13","13","13","13","14","14","14","14","14","14","14","14","14","14","14","14","15","15","15","15","15","15","15","15","16","16","16","16","16","16","16","17","17","17","17","17","17","17","17","17","17","17","17","18","18","19","19","19","19","19","19","19","19","19","19","19","19","20","20","20","20","20","20","20","20","20","20","20","20","21","21","21","21","21","21","21","21","21","21","21","21","22","22","22","22","22","22","22","22","22","22","22","22","23","23","23","23","23","23","23","23","23","23","23","23","24","24","24","24","24","24","24","24","24","24","24","24","25","25","25","25","25","25","25","25","25","25","25","25","26","26","26","26","26","26","26","26","26","26","26","26","27","27","27","27","27","27","27","27","27","27","27","27","28","28","28","28","28","28","28","28","28","28","28","28","29","29","29","29","29","29","29","29","29","29","29","29","30","30","30","30","30","30","30","30","30","30","30","30","31","31","31","31","31","31","31","31","31","31","31","31","32","32","32","32","32","32","32","32","32","32","32","32","33","33","33","33","33","33","33","33","33","33","33","33","34","34","34","34","34","34","34","34","34","34","34","34","35","35","35","35","35","35","35","35","35","35","35","35","36","36","36","36","36","36","36","36","36","36","36","36","37","37","37","37","37","37","37","37","37","37","37","37","38","38","38","38","38","38","38","38","38","38","38","38","39","39","39","39","39","39","39","39","39","39","39","39","40","40","40","40","40","40","40","40","40","40","40","40","41","41","41","41","41","41","41","41","41","41","41","41","42","42","42","42","42","42","42","42","42","42","42","42","43","43","43","43","43","43","43","43","43","43","43","43","44","44","44","44","44","44","44","44","44","44","45","45","45","45","45","45","45","45","45","45","45","45","46","46","46","46","46","46","46","46","46","46","46","46","47","47","47","47","47","47","47","47","47","47","47","47","48","48","48","48","48","48","48","48","48","48","48","48","49","49","49","49","49","49","49","49","49","49","49","49","50","50","50","50","50","50","50","50","50","50","50","50"],["1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","2","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","3","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4","4"]],"container":"<table class=\"display\">\n  <thead>\n    <tr>\n      <th> <\/th>\n      <th>weight<\/th>\n      <th>Time<\/th>\n      <th>Chick<\/th>\n      <th>Diet<\/th>\n    <\/tr>\n  <\/thead>\n<\/table>","options":{"deferRender":true,"scrollY":300,"scroller":true,"columnDefs":[{"className":"dt-right","targets":[1,2]},{"orderable":false,"targets":0},{"name":" ","targets":0},{"name":"weight","targets":1},{"name":"Time","targets":2},{"name":"Chick","targets":3},{"name":"Diet","targets":4}],"order":[],"autoWidth":false,"orderClasses":false}},"evals":[],"jsHooks":[]}</script>


---
# Nested data?

How does the weight vary over time?


``` r
ggplot(ChickWeight, aes(Time, weight)) + geom_line()
```

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="ggplot2_files/figure-html/unnamed-chunk-59-1.png" alt="uhhhh...that ain't it" width="40%" /&gt;
&lt;p class="caption"&gt;uhhhh...that ain't it&lt;/p&gt;
&lt;/div&gt;


---
# Group option

Adding `group = Chick` to the aesthetic mapping...


``` r
ggplot(ChickWeight, aes(Time, weight, group = Chick)) + geom_line()
```

&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="ggplot2_files/figure-html/unnamed-chunk-60-1.png" alt="Bingo!" width="40%" /&gt;
&lt;p class="caption"&gt;Bingo!&lt;/p&gt;
&lt;/div&gt;


---
# Group option

Adding a layer with a different "grouping" (all Chicks together)


``` r
ggplot(ChickWeight, aes(Time, weight, group = Chick)) + geom_line() +
  geom_smooth(aes(group = 1), linewidth = 2, se = FALSE)
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-61-1.png" width="40%" style="display: block; margin: auto;" /&gt;


---
# Group option: mixing types


``` r
p &lt;- ggplot(ChickWeight, aes(as.factor(Time), weight)) + geom_boxplot()
p
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-62-1.png" width="40%" style="display: block; margin: auto;" /&gt;


---
# Group option: mixing types


``` r
p + geom_line(aes(group = Chick, color = "pink4"))
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-63-1.png" width="40%" style="display: block; margin: auto;" /&gt;



---
# Group option: mixing types


``` r
p + geom_line(aes(group = Chick), color = "pink4", alpha = .50)
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-64-1.png" width="40%" style="display: block; margin: auto;" /&gt;


---
# Group option: mixing types


``` r
p + geom_smooth(aes(group = Chick), method="lm", se = FALSE)
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-65-1.png" width="40%" style="display: block; margin: auto;" /&gt;


---
# Group option: mixing types


``` r
p + geom_line(stat = "smooth", aes(group = Chick), method = "lm", alpha = .20)
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-66-1.png" width="40%" style="display: block; margin: auto;" /&gt;


---
class: inverse, center, middle

# Themes


---
# Themes

* The `theme()` function used for the previous plot has MANY different options

  + e.g., formatting legend, tick marks on axes, background,

  + [list of options](https://ggplot2.tidyverse.org/reference/theme.html)

* There are also general themes you can apply

  + [list of themes](https://ggplot2.tidyverse.org/reference/ggtheme.html)
  
  + let's see a few examples

---
# Themes: black &amp; white

``` r
ggplot(mtcars, aes(x = mpg, y = wt, color = factor(cyl))) + geom_point() +
* theme_bw()
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-67-1.png" width="50%" style="display: block; margin: auto;" /&gt;



---
# Themes: classic

``` r
ggplot(mtcars, aes(x = mpg, y = wt, color = factor(cyl))) + geom_point() +
* theme_classic()
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-68-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
# Themes: dark

``` r
ggplot(mtcars, aes(x = mpg, y = wt, color = factor(cyl))) + geom_point() +
* theme_dark()
```

&lt;img src="ggplot2_files/figure-html/unnamed-chunk-69-1.png" width="50%" style="display: block; margin: auto;" /&gt;


---
# Summary

* Extensions

  + https://exts.ggplot2.tidyverse.org/gallery/


    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
  "highlightStyle": "github",
  "highlightLines": true,
  "countIncrementalSlides": false,
  "navigation": {
    "scroll": false
  }
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
